<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rosa Adormecida - A Surprise Awaits</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --curtain-dark: #1a0508;
        --curtain-red: #8b1a2c;
        --curtain-highlight: #c4324a;
        --rose-pink: #ffb6c8;
        --rose-glow: rgba(255, 182, 200, 0.6);
        --gold: #d4a853;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Playfair Display", serif;
      }

      body {
        min-height: 100vh;
        overflow: hidden;
        background: var(--curtain-dark);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: filter 0.8s ease, background 1s ease;
      }

      /* Start darker for cinematic entrance */
      body.cinematic-start {
        filter: brightness(0.6);
      }

      body.brightening {
        filter: brightness(1.15);
        background: #2a0a10;
      }

      /* ========== VIGNETTE OVERLAY ========== */
      .vignette {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 100;
        background: radial-gradient(
          ellipse at center,
          transparent 40%,
          rgba(0, 0, 0, 0.4) 80%,
          rgba(0, 0, 0, 0.7) 100%
        );
      }

      /* ========== HEARTBEAT GLOW PULSE ========== */
      .heartbeat-glow {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80vmax;
        height: 80vmax;
        background: radial-gradient(circle, rgba(180, 50, 70, 0.12) 0%, transparent 60%);
        pointer-events: none;
        z-index: 1;
        animation: heartbeatPulse 2s ease-in-out infinite;
      }

      @keyframes heartbeatPulse {
        0%, 100% {
          opacity: 0.3;
          transform: translate(-50%, -50%) scale(0.95);
        }
        15% {
          opacity: 0.7;
          transform: translate(-50%, -50%) scale(1.05);
        }
        30% {
          opacity: 0.4;
          transform: translate(-50%, -50%) scale(0.98);
        }
        45% {
          opacity: 0.6;
          transform: translate(-50%, -50%) scale(1.02);
        }
        60%, 100% {
          opacity: 0.3;
          transform: translate(-50%, -50%) scale(0.95);
        }
      }

      /* ========== CURTAIN BACKGROUND ========== */
      .curtain-container {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
      }

      .curtain {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 52%;
        background: 
          /* Fabric folds */
          repeating-linear-gradient(
            90deg,
            rgba(0, 0, 0, 0.3) 0px,
            rgba(0, 0, 0, 0.1) 8px,
            rgba(139, 26, 44, 0.4) 15px,
            rgba(0, 0, 0, 0.2) 20px,
            transparent 25px,
            rgba(196, 50, 74, 0.2) 35px,
            rgba(0, 0, 0, 0.25) 45px
          ),
          /* Main gradient */
          linear-gradient(
            180deg,
            #4a0d18 0%,
            #8b1a2c 15%,
            #6d1522 40%,
            #8b1a2c 60%,
            #5a1018 85%,
            #2a0508 100%
          );
        box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.5);
        animation: curtainSway 8s ease-in-out infinite;
      }

      .curtain-left {
        left: 0;
        transform-origin: left center;
        border-right: 2px solid rgba(212, 168, 83, 0.3);
      }

      .curtain-right {
        right: 0;
        transform-origin: right center;
        border-left: 2px solid rgba(212, 168, 83, 0.3);
        animation-delay: -4s;
      }

      @keyframes curtainSway {
        0%, 100% {
          transform: skewY(0deg) scaleX(1);
        }
        25% {
          transform: skewY(0.3deg) scaleX(1.005);
        }
        50% {
          transform: skewY(0deg) scaleX(1);
        }
        75% {
          transform: skewY(-0.3deg) scaleX(1.005);
        }
      }

      /* Curtain highlights */
      .curtain::before {
        content: "";
        position: absolute;
        inset: 0;
        background: 
          linear-gradient(
            90deg,
            transparent 10%,
            rgba(255, 200, 210, 0.05) 20%,
            transparent 30%,
            rgba(255, 200, 210, 0.03) 50%,
            transparent 60%,
            rgba(255, 200, 210, 0.04) 80%,
            transparent 90%
          );
        animation: shimmerCurtain 12s ease-in-out infinite;
      }

      @keyframes shimmerCurtain {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
      }

      /* Top drape shadow */
      .curtain::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 120px;
        background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, transparent 100%);
      }

      /* ========== CURTAIN SPLIT ANIMATION ========== */
      .curtain-opening .curtain-left {
        animation: curtainOpenLeft 2.5s ease-in-out forwards;
      }

      .curtain-opening .curtain-right {
        animation: curtainOpenRight 2.5s ease-in-out forwards;
      }

      @keyframes curtainOpenLeft {
        0% { transform: translateX(0) skewY(0); }
        100% { transform: translateX(-100%) skewY(3deg); }
      }

      @keyframes curtainOpenRight {
        0% { transform: translateX(0) skewY(0); }
        100% { transform: translateX(100%) skewY(-3deg); }
      }

      /* ========== POETIC INTRO TEXT ========== */
      .poetic-intro {
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 50;
        pointer-events: none;
        opacity: 0;
        transition: opacity 1.5s ease;
      }

      .poetic-intro.visible {
        opacity: 1;
      }

      .poetic-intro.fade-out {
        opacity: 0;
      }

      .poetic-line {
        font-size: clamp(1.2rem, 4vw, 2rem);
        font-style: italic;
        color: rgba(255, 220, 230, 0.9);
        text-shadow: 0 0 30px rgba(255, 182, 200, 0.5);
        letter-spacing: 0.05em;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 1.2s ease, transform 1.2s ease;
      }

      .poetic-line.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .poetic-line:nth-child(2) {
        margin-top: 12px;
        transition-delay: 0.8s;
      }

      /* ========== MAIN CONTENT ========== */
      .main-content {
        position: relative;
        z-index: 20;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 32px;
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 1.5s ease 0.5s, transform 1.5s ease 0.5s;
      }

      .main-content.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* ========== FOR ROSA TEXT ========== */
      .for-rosa {
        font-size: clamp(1.5rem, 5vw, 2.5rem);
        color: rgba(255, 240, 245, 0.95);
        letter-spacing: 0.15em;
        text-transform: uppercase;
        animation: floatText 4s ease-in-out infinite;
      }

      .for-rosa .name {
        display: inline-block;
        background: linear-gradient(90deg, var(--rose-pink), #ffd6e0, var(--rose-pink));
        background-size: 200% auto;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: nameShimmer 3s ease-in-out infinite, floatText 4s ease-in-out infinite;
        filter: drop-shadow(0 0 12px var(--rose-glow));
        position: relative;
      }

      /* Shimmer pass effect */
      .for-rosa .name::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmerPass 4s ease-in-out infinite;
      }

      @keyframes floatText {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
      }

      @keyframes nameShimmer {
        0%, 100% {
          background-position: 0% center;
          filter: drop-shadow(0 0 12px rgba(255, 182, 200, 0.5));
        }
        50% {
          background-position: 200% center;
          filter: drop-shadow(0 0 24px rgba(255, 182, 200, 0.8));
        }
      }

      @keyframes shimmerPass {
        0% { left: -100%; opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { left: 200%; opacity: 0; }
      }

      /* ========== OPEN BUTTON ========== */
      .open-btn {
        position: relative;
        padding: 18px 48px;
        font-size: 1.3rem;
        font-weight: 600;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: #fff;
        background: linear-gradient(135deg, #8b1a2c 0%, #c4324a 50%, #8b1a2c 100%);
        border: 2px solid rgba(255, 182, 200, 0.3);
        border-radius: 50px;
        cursor: pointer;
        overflow: hidden;
        animation: breathe 3s ease-in-out infinite, glowPulse 2s ease-in-out infinite;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .open-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 60%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: shineSweep 3.5s ease-in-out infinite;
      }

      .open-btn:hover {
        transform: scale(1.08) translateY(-3px);
        box-shadow: 
          0 0 40px rgba(196, 50, 74, 0.6),
          0 15px 40px rgba(0, 0, 0, 0.4);
      }

      .open-btn:active {
        transform: scale(1.02);
      }

      @keyframes breathe {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      @keyframes glowPulse {
        0%, 100% {
          box-shadow: 
            0 0 20px rgba(196, 50, 74, 0.4),
            0 8px 30px rgba(0, 0, 0, 0.3);
        }
        50% {
          box-shadow: 
            0 0 40px rgba(196, 50, 74, 0.7),
            0 0 60px rgba(255, 100, 130, 0.3),
            0 8px 30px rgba(0, 0, 0, 0.3);
        }
      }

      @keyframes shineSweep {
        0% { left: -100%; }
        50%, 100% { left: 200%; }
      }

      /* ========== MICROCOPY ========== */
      .microcopy {
        font-size: 0.95rem;
        font-style: italic;
        color: rgba(255, 210, 220, 0.7);
        letter-spacing: 0.05em;
        text-shadow: 0 0 20px rgba(255, 182, 200, 0.3);
        animation: fadeInUp 1.5s ease 1s both;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ========== ROSE PETAL BURST ========== */
      .petal-container {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 60;
        overflow: hidden;
      }

      .petal {
        position: absolute;
        width: 20px;
        height: 28px;
        background: radial-gradient(circle at 30% 30%, #ffb6c8, #c94a66);
        border-radius: 60% 40% 60% 40%;
        opacity: 0;
        animation: petalBurst 3s ease-out forwards;
      }

      @keyframes petalBurst {
        0% {
          opacity: 0;
          transform: translate(0, 0) rotate(0deg) scale(0.5);
        }
        10% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translate(var(--tx), var(--ty)) rotate(720deg) scale(1);
        }
      }

      /* ========== FLOATING AMBIENT PETALS ========== */
      .ambient-petal {
        position: fixed;
        width: 14px;
        height: 20px;
        background: radial-gradient(circle at 30% 30%, rgba(255, 182, 200, 0.6), rgba(180, 60, 80, 0.4));
        border-radius: 60% 40% 60% 40%;
        pointer-events: none;
        z-index: 15;
        animation: floatPetal linear infinite;
      }

      @keyframes floatPetal {
        0% {
          transform: translateY(-20px) rotate(0deg) translateX(0);
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(110vh) rotate(360deg) translateX(30px);
          opacity: 0;
        }
      }

      /* ========== AUDIO ELEMENTS ========== */
      audio:not(#voice-msg) {
        display: none;
      }

      /* ========== PROPOSAL PHASE ========== */
      .proposal-phase {
        position: fixed;
        inset: 0;
        z-index: 200;
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.5s ease;
        background: linear-gradient(135deg, #0a0304 0%, #1a0508 50%, #0d0203 100%);
      }

      .proposal-phase.active {
        opacity: 1;
        pointer-events: auto;
      }

      .proposal-gradient-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse at center, rgba(139, 26, 44, 0.15) 0%, transparent 60%);
        pointer-events: none;
      }

      .proposal-petal-layer {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
      }

      /* Scene text */
      .scene {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 16px;
        padding: 24px;
        z-index: 10;
        transition: filter 1s ease, transform 1s ease;
      }

      .scene-text {
        font-size: clamp(1.2rem, 4vw, 2rem);
        font-style: italic;
        color: rgba(255, 220, 230, 0.95);
        text-shadow: 0 0 30px rgba(255, 182, 200, 0.5);
        letter-spacing: 0.05em;
        text-align: center;
        opacity: 0;
        transform: translateY(20px) scale(0.95);
        transition: opacity 1.5s ease, transform 1.5s ease;
      }

      .scene-text.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      /* Cinematic text entrance */
      .cinematic-text {
        opacity: 0;
        transform: translateY(15px) scale(0.95);
        transition: opacity 1.5s ease, transform 1.5s ease;
      }

      .cinematic-text.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      /* Proposal overlay */
      .proposal-overlay {
        position: fixed;
        inset: 0;
        z-index: 80;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        background: rgba(8, 4, 7, 0.76);
        backdrop-filter: blur(8px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.1s ease;
      }

      .proposal-open .proposal-overlay {
        opacity: 1;
        pointer-events: auto;
      }

      .proposal-open .scene {
        filter: blur(2px) brightness(0.65);
        transform: scale(1.02);
      }

      .proposal-card-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(255, 100, 120, 0.15), transparent 70%);
        animation: cardGlowPulse 3s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes cardGlowPulse {
        0%, 100% { opacity: 0.5; transform: scale(0.95); }
        50% { opacity: 1; transform: scale(1.05); }
      }

      .proposal-card {
        position: relative;
        width: min(720px, 92vw);
        border-radius: 28px;
        border: 1px solid rgba(248, 198, 210, 0.18);
        background: linear-gradient(150deg, rgba(18, 7, 11, 0.96), rgba(46, 14, 22, 0.92));
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
        padding: 48px 40px;
        text-align: center;
        opacity: 0;
        transform: translateY(24px) scale(0.98);
      }

      .proposal-open .proposal-card {
        animation: proposalReveal 1.4s ease forwards;
      }

      @keyframes proposalReveal {
        0% { opacity: 0; transform: translateY(24px) scale(0.98); }
        100% { opacity: 1; transform: translateY(0) scale(1); }
      }

      .proposal-headline {
        font-size: clamp(1.3rem, 4vw, 2rem);
        color: rgba(255, 240, 245, 0.9);
        margin-bottom: 8px;
      }

      .proposal-name {
        font-size: clamp(2.5rem, 8vw, 4rem);
        font-weight: 700;
        letter-spacing: 0.1em;
        margin: 16px 0;
      }

      .name-glow {
        background: linear-gradient(90deg, #ffb6c8, #ffd6e0, #ffb6c8);
        background-size: 200% auto;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: nameShimmer 3s ease-in-out infinite;
        filter: drop-shadow(0 0 20px rgba(255, 182, 200, 0.6));
      }

      .proposal-question {
        font-size: clamp(2rem, 6vw, 3rem);
        color: rgba(255, 240, 245, 0.9);
      }

      .btn-group {
        display: flex;
        justify-content: center;
        gap: 24px;
        margin-top: 32px;
        flex-wrap: wrap;
      }

      .yes-btn, .no-btn {
        padding: 16px 40px;
        font-size: 1.2rem;
        font-weight: 600;
        letter-spacing: 0.1em;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .yes-btn {
        background: linear-gradient(135deg, #c94a66 0%, #e06080 50%, #c94a66 100%);
        color: #fff;
        border: none;
        box-shadow: 0 0 20px rgba(201, 74, 102, 0.4);
      }

      .yes-btn.pulse-btn {
        animation: yesPulse 2.5s ease-in-out infinite;
      }

      .yes-btn.clicked {
        animation: none;
      }

      @keyframes yesPulse {
        0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(201, 74, 102, 0.4); }
        50% { transform: scale(1.05); box-shadow: 0 0 35px rgba(201, 74, 102, 0.7); }
      }

      .yes-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 0 40px rgba(201, 74, 102, 0.7);
      }

      .no-btn {
        background: transparent;
        color: rgba(255, 200, 210, 0.7);
        border: 1px solid rgba(255, 200, 210, 0.3);
      }

      .no-btn:hover {
        background: rgba(255, 200, 210, 0.1);
      }

      /* Success overlay */
      .success-overlay {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(8px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.1s ease;
        z-index: 90;
      }

      .success-open .success-overlay {
        opacity: 1;
        pointer-events: auto;
      }

      .success-card-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(255, 100, 120, 0.12), transparent 70%);
        animation: cardGlowPulse 3.5s ease-in-out infinite;
        pointer-events: none;
      }

      .success-card {
        position: relative;
        width: min(600px, 90vw);
        border-radius: 28px;
        border: 1px solid rgba(248, 198, 210, 0.25);
        background: linear-gradient(150deg, rgba(42, 15, 24, 0.98), rgba(60, 20, 32, 0.95));
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
        padding: 48px 40px;
        text-align: center;
        opacity: 0;
        transform: translateY(24px) scale(0.98);
      }

      .success-open .success-card {
        animation: proposalReveal 1.4s ease forwards;
      }

      .success-line {
        font-size: clamp(1.1rem, 3vw, 1.5rem);
        color: rgba(255, 230, 235, 0.9);
        margin: 12px 0;
        opacity: 0;
        transform: translateY(15px) scale(0.95);
        transition: opacity 0.8s ease, transform 0.8s ease;
      }

      .success-line.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      .success-line:first-child {
        font-size: 3rem;
      }

      .final-note {
        margin-top: 24px;
        font-style: italic;
        color: rgba(255, 182, 200, 0.9);
      }

      /* Voice player */
      .voice-player {
        margin-top: 32px;
        padding: 20px;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.2);
      }

      .voice-player-hidden {
        opacity: 0;
        transform: translateY(15px);
        pointer-events: none;
      }

      .voice-player-visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
        transition: opacity 1s ease, transform 1s ease;
      }

      .voice-label {
        font-size: 0.95rem;
        color: rgba(255, 200, 210, 0.8);
        margin-bottom: 12px;
        font-style: italic;
      }

      #voice-msg {
        width: 100%;
        max-width: 300px;
        border-radius: 30px;
      }

      /* Proposal phase petals */
      .proposal-petal {
        position: absolute;
        background: radial-gradient(circle at 30% 30%, #f3a7bb, #9b2d47);
        border-radius: 60% 40% 60% 40%;
        opacity: 0;
        will-change: transform, opacity;
        animation: proposalPetalFloat linear infinite;
      }

      @keyframes proposalPetalFloat {
        0% {
          transform: translateY(-20px) rotate(0deg) translateX(0);
          opacity: 0;
        }
        10% { opacity: 0.6; }
        90% { opacity: 0.6; }
        100% {
          transform: translateY(110vh) rotate(360deg) translateX(50px);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="cinematic-start">
    <!-- Vignette overlay -->
    <div class="vignette"></div>
    
    <!-- Heartbeat glow pulse -->
    <div class="heartbeat-glow"></div>

    <!-- Curtain background -->
    <div class="curtain-container" id="curtain-container">
      <div class="curtain curtain-left"></div>
      <div class="curtain curtain-right"></div>
    </div>

    <!-- Poetic intro text -->
    <div class="poetic-intro" id="poetic-intro">
      <p class="poetic-line">Some surprises are not opened...</p>
      <p class="poetic-line">They are felt.</p>
    </div>

    <!-- Main content -->
    <div class="main-content" id="main-content">
      <h1 class="for-rosa">
        For <span class="name">Rosa</span>...
      </h1>
      
      <button class="open-btn" id="open-btn">
        Open
      </button>
      
      <p class="microcopy">Tap gently... if your heart is ready.</p>
    </div>

    <!-- Petal container for burst effect -->
    <div class="petal-container" id="petal-container"></div>

    <!-- ========== PROPOSAL PHASE ========== -->
    <div class="proposal-phase" id="proposal-phase">
      <!-- Gradient overlay -->
      <div class="proposal-gradient-overlay"></div>
      
      <!-- Floating petals layer -->
      <div class="proposal-petal-layer" id="proposal-petal-layer"></div>

      <!-- Scene content -->
      <div class="scene" id="scene">
        <p class="scene-text cinematic-text" id="line1" data-text="In the quiet of my heart..."></p>
        <p class="scene-text cinematic-text" id="line2" data-text="a rose blooms for you."></p>
        <p class="scene-text cinematic-text" id="line3" data-text="With petals soft as whispered dreams,"></p>
        <p class="scene-text cinematic-text" id="line4" data-text="I ask you this..."></p>
      </div>

      <!-- Proposal overlay -->
      <div class="proposal-overlay">
        <div class="proposal-card-glow"></div>
        <div class="proposal-card">
          <p class="proposal-headline cinematic-text">Will you be my Valentine,</p>
          <p class="proposal-name name-glow">ADETEJU</p>
          <p class="proposal-question cinematic-text">?</p>
          <div class="btn-group">
            <button id="yes-btn" class="yes-btn pulse-btn">YES ðŸ’•</button>
            <button id="no-btn" class="no-btn">No</button>
          </div>
        </div>
      </div>

      <!-- Success overlay -->
      <div class="success-overlay" id="success-overlay">
        <div class="success-card-glow"></div>
        <div class="success-card">
          <p class="success-line">ðŸŒ¹</p>
          <p class="success-line">My heart chose you</p>
          <p class="success-line">before my eyes ever did.</p>
          <p class="success-line">Thank you for being my dream come true.</p>
          <p class="success-line final-note">â€“ Forever Yours ðŸ’•</p>
          <div class="voice-player voice-player-hidden" id="voice-player">
            <p class="voice-label">A message from my heart:</p>
            <audio id="voice-msg" controls>
              <source src="voice-message.mp3" type="audio/mpeg" />
            </audio>
          </div>
        </div>
      </div>
    </div>

    <!-- Audio elements -->
    <audio id="heartbeat-audio" loop preload="auto">
      <source src="https://assets.mixkit.co/sfx/preview/mixkit-single-heartbeat-580.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="curtain-sound" preload="auto">
      <source src="https://assets.mixkit.co/sfx/preview/mixkit-fabric-swoosh-1486.mp3" type="audio/mpeg">
    </audio>

    <script>
      // Elements
      const body = document.body;
      const poeticIntro = document.getElementById("poetic-intro");
      const poeticLines = document.querySelectorAll(".poetic-line");
      const mainContent = document.getElementById("main-content");
      const openBtn = document.getElementById("open-btn");
      const curtainContainer = document.getElementById("curtain-container");
      const petalContainer = document.getElementById("petal-container");
      const heartbeatAudio = document.getElementById("heartbeat-audio");
      const curtainSound = document.getElementById("curtain-sound");

      // Set initial heartbeat volume
      heartbeatAudio.volume = 0.15;
      curtainSound.volume = 0.4;

      // ========== CREATE AMBIENT FLOATING PETALS ==========
      const createAmbientPetal = () => {
        const petal = document.createElement("div");
        petal.className = "ambient-petal";
        
        const size = 10 + Math.random() * 12;
        petal.style.width = `${size}px`;
        petal.style.height = `${size * 1.4}px`;
        petal.style.left = `${Math.random() * 100}%`;
        petal.style.animationDuration = `${12 + Math.random() * 8}s`;
        petal.style.animationDelay = `${Math.random() * 5}s`;
        petal.style.opacity = 0.3 + Math.random() * 0.4;
        petal.style.filter = `blur(${Math.random() * 1.5}px)`;
        
        body.appendChild(petal);
        
        setTimeout(() => petal.remove(), 25000);
      };

      // Create initial ambient petals
      for (let i = 0; i < 8; i++) {
        setTimeout(() => createAmbientPetal(), i * 400);
      }
      setInterval(createAmbientPetal, 2000);

      // ========== CINEMATIC ENTRANCE SEQUENCE ==========
      const startCinematicSequence = async () => {
        // Try to play heartbeat audio
        try {
          await heartbeatAudio.play();
        } catch (e) {
          // Audio autoplay blocked, will start on interaction
          const startAudio = () => {
            heartbeatAudio.play();
            document.removeEventListener("click", startAudio);
            document.removeEventListener("touchstart", startAudio);
          };
          document.addEventListener("click", startAudio, { once: true });
          document.addEventListener("touchstart", startAudio, { once: true });
        }

        // Step 1: Fade in brightness
        setTimeout(() => {
          body.classList.remove("cinematic-start");
        }, 500);

        // Step 2: Show poetic intro
        setTimeout(() => {
          poeticIntro.classList.add("visible");
          poeticLines.forEach(line => line.classList.add("visible"));
        }, 1000);

        // Step 3: Fade out poetic intro
        setTimeout(() => {
          poeticIntro.classList.add("fade-out");
        }, 4000);

        // Step 4: Show main content
        setTimeout(() => {
          mainContent.classList.add("visible");
        }, 5000);
      };

      // Start the sequence
      startCinematicSequence();

      // ========== PETAL BURST EFFECT ==========
      const createPetalBurst = (x, y, count = 25) => {
        for (let i = 0; i < count; i++) {
          const petal = document.createElement("div");
          petal.className = "petal";
          
          const size = 12 + Math.random() * 18;
          petal.style.width = `${size}px`;
          petal.style.height = `${size * 1.4}px`;
          petal.style.left = `${x}px`;
          petal.style.top = `${y}px`;
          
          // Random direction
          const angle = Math.random() * Math.PI * 2;
          const distance = 150 + Math.random() * 250;
          const tx = Math.cos(angle) * distance;
          const ty = Math.sin(angle) * distance - 100; // Bias upward
          
          petal.style.setProperty("--tx", `${tx}px`);
          petal.style.setProperty("--ty", `${ty}px`);
          petal.style.animationDelay = `${Math.random() * 0.3}s`;
          
          // Vary colors
          const hue = 340 + Math.random() * 30;
          petal.style.background = `radial-gradient(circle at 30% 30%, hsl(${hue}, 80%, 80%), hsl(${hue}, 60%, 50%))`;
          
          petalContainer.appendChild(petal);
          
          setTimeout(() => petal.remove(), 3500);
        }
      };

      // ========== BUTTON CLICK HANDLER ==========
      const proposalPhase = document.getElementById("proposal-phase");
      const bgMusic = document.getElementById("bg-music");
      
      openBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        
        // Play curtain sound
        try {
          curtainSound.currentTime = 0;
          await curtainSound.play();
        } catch (err) {
          // Sound failed, continue anyway
        }

        // Increase heartbeat tempo (by speeding up playback)
        heartbeatAudio.playbackRate = 1.3;

        // Create petal burst from button
        const rect = openBtn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        createPetalBurst(centerX, centerY, 30);

        // Start curtain opening animation
        curtainContainer.classList.add("curtain-opening");

        // Brighten background
        setTimeout(() => {
          body.classList.add("brightening");
        }, 800);

        // Fade out main content
        setTimeout(() => {
          mainContent.style.opacity = "0";
          mainContent.style.transform = "scale(1.1)";
          mainContent.style.transition = "opacity 0.8s ease, transform 0.8s ease";
        }, 1200);

        // Second petal burst for extra magic
        setTimeout(() => {
          createPetalBurst(window.innerWidth / 2, window.innerHeight / 2, 40);
        }, 1500);

        // Transition to proposal phase
        setTimeout(() => {
          // Fade out heartbeat
          const fadeOutAudio = setInterval(() => {
            if (heartbeatAudio.volume > 0.02) {
              heartbeatAudio.volume -= 0.02;
            } else {
              clearInterval(fadeOutAudio);
              heartbeatAudio.pause();
            }
          }, 50);
          
          // Show proposal phase
          proposalPhase.classList.add("active");
          
          // Start background music
          try {
            bgMusic.volume = 0.5;
            bgMusic.play();
          } catch (err) {}
          
          // Start proposal sequence
          startProposalSequence();
        }, 2500);
      });

      
      // Subtle cursor glow trail effect
      let lastX = 0, lastY = 0;
      document.addEventListener("mousemove", (e) => {
        const dx = e.clientX - lastX;
        const dy = e.clientY - lastY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance > 80) {
          lastX = e.clientX;
          lastY = e.clientY;
          
          // Occasionally spawn a tiny petal at cursor
          if (Math.random() > 0.7) {
            const petal = document.createElement("div");
            petal.className = "ambient-petal";
            petal.style.width = "8px";
            petal.style.height = "12px";
            petal.style.left = `${e.clientX}px`;
            petal.style.top = `${e.clientY}px`;
            petal.style.position = "fixed";
            petal.style.animation = "none";
            petal.style.opacity = "0.6";
            petal.style.transition = "opacity 1s ease, transform 1s ease";
            body.appendChild(petal);
            
            setTimeout(() => {
              petal.style.opacity = "0";
              petal.style.transform = "translateY(30px) rotate(180deg)";
            }, 50);
            
            setTimeout(() => petal.remove(), 1100);
          }
        }
      });

      // Add slight parallax to content on mouse move
      document.addEventListener("mousemove", (e) => {
        const xPercent = (e.clientX / window.innerWidth - 0.5) * 2;
        const yPercent = (e.clientY / window.innerHeight - 0.5) * 2;
        
        mainContent.style.transform = `translateY(${mainContent.classList.contains("visible") ? 0 : 30}px) translate(${xPercent * 5}px, ${yPercent * 5}px)`;
      });

      // ========== PROPOSAL PHASE FUNCTIONS ==========
      const proposalPetalLayer = document.getElementById("proposal-petal-layer");
      const yesBtn = document.getElementById("yes-btn");
      const noBtn = document.getElementById("no-btn");
      const successOverlay = document.getElementById("success-overlay");

      // Create floating petals for proposal phase
      const createProposalPetal = () => {
        const petal = document.createElement("div");
        petal.className = "proposal-petal";
        const size = 8 + Math.random() * 16;
        petal.style.width = `${size}px`;
        petal.style.height = `${size * 1.4}px`;
        petal.style.left = `${Math.random() * 100}%`;
        petal.style.animationDuration = `${10 + Math.random() * 10}s`;
        petal.style.animationDelay = `${Math.random() * 5}s`;
        petal.style.opacity = 0.3 + Math.random() * 0.4;
        petal.style.filter = `blur(${Math.random() * 1.5}px)`;
        proposalPetalLayer.appendChild(petal);
        setTimeout(() => petal.remove(), 22000);
      };

      // Typewriter effect
      const typeWriter = (element, text, speed = 50) => {
        return new Promise((resolve) => {
          let i = 0;
          element.textContent = "";
          element.classList.add("visible");
          const type = () => {
            if (i < text.length) {
              element.textContent += text.charAt(i);
              i++;
              setTimeout(type, speed);
            } else {
              resolve();
            }
          };
          type();
        });
      };

      // Start proposal sequence
      const startProposalSequence = async () => {
        // Start floating petals
        for (let i = 0; i < 15; i++) {
          setTimeout(createProposalPetal, i * 300);
        }
        setInterval(createProposalPetal, 1500);

        const lines = [
          { el: document.getElementById("line1"), text: "In the quiet of my heart..." },
          { el: document.getElementById("line2"), text: "a rose blooms for you." },
          { el: document.getElementById("line3"), text: "With petals soft as whispered dreams," },
          { el: document.getElementById("line4"), text: "I ask you this..." }
        ];

        // Type each line with delays
        for (let i = 0; i < lines.length; i++) {
          await new Promise(r => setTimeout(r, 800));
          await typeWriter(lines[i].el, lines[i].text, 55);
          await new Promise(r => setTimeout(r, 600));
        }

        // Show proposal overlay
        await new Promise(r => setTimeout(r, 1200));
        proposalPhase.classList.add("proposal-open");

        // Animate proposal card text
        const proposalTexts = document.querySelectorAll(".proposal-card .cinematic-text");
        proposalTexts.forEach((el, index) => {
          setTimeout(() => el.classList.add("visible"), 400 * (index + 1));
        });
      };

      // NO button - moves around screen
      let noBtnMoved = false;
      const moveNoButton = () => {
        if (!noBtnMoved) {
          document.body.appendChild(noBtn);
          noBtnMoved = true;
        }
        const padding = 40;
        const btnWidth = noBtn.offsetWidth || 100;
        const btnHeight = noBtn.offsetHeight || 50;
        const maxX = Math.max(padding, window.innerWidth - btnWidth - padding);
        const maxY = Math.max(padding, window.innerHeight - btnHeight - padding);
        const x = padding + Math.random() * (maxX - padding);
        const y = padding + Math.random() * (maxY - padding);
        
        noBtn.style.position = "fixed";
        noBtn.style.left = `${x}px`;
        noBtn.style.top = `${y}px`;
        noBtn.style.transform = "none";
        noBtn.style.zIndex = "9999";
        noBtn.style.margin = "0";
        noBtn.style.transition = "left 0.3s ease, top 0.3s ease";
      };

      noBtn.addEventListener("mouseenter", moveNoButton);
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        moveNoButton();
      });
      noBtn.addEventListener("click", (e) => {
        e.preventDefault();
        moveNoButton();
      });

      // YES button click
      yesBtn.addEventListener("click", () => {
        // Stop pulse animation
        yesBtn.classList.add("clicked");
        
        // Hide NO button
        noBtn.style.display = "none";

        // Emotional pause
        setTimeout(() => {
          // Confetti burst
          if (typeof confetti !== 'undefined') {
            confetti({
              particleCount: 150,
              spread: 90,
              origin: { y: 0.6 },
              colors: ["#f8c6d2", "#b63a57", "#f0a7b7", "#ffffff", "#ffb6c8"],
            });
          }

          // Show success overlay
          proposalPhase.classList.remove("proposal-open");
          proposalPhase.classList.add("success-open");

          // Reveal success lines one by one
          const successLines = document.querySelectorAll(".success-line");
          successLines.forEach((line, index) => {
            setTimeout(() => {
              line.classList.add("visible");
            }, 600 * (index + 1));
          });

          // Show voice player after all lines
          const voicePlayer = document.getElementById("voice-player");
          setTimeout(() => {
            voicePlayer.classList.remove("voice-player-hidden");
            voicePlayer.classList.add("voice-player-visible");
          }, 600 * (successLines.length + 1) + 500);

        }, 500);
      });
    </script>
    
    <!-- Confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  </body>
</html>
